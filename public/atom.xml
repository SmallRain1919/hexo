<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>小鱼技术栈</title>
  
  
  <link href="http://blog.smallrains.com/atom.xml" rel="self"/>
  
  <link href="http://blog.smallrains.com/"/>
  <updated>2024-12-25T12:43:59.080Z</updated>
  <id>http://blog.smallrains.com/</id>
  
  <author>
    <name>小鱼不吃鱼.</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>自动化部署hexo博客（一）</title>
    <link href="http://blog.smallrains.com/2024/12/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2hexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>http://blog.smallrains.com/2024/12/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2hexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89/</id>
    <published>2024-12-25T12:26:00.000Z</published>
    <updated>2024-12-25T12:43:59.080Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、部署git私有仓库"><a href="#一、部署git私有仓库" class="headerlink" title="一、部署git私有仓库"></a>一、部署git私有仓库</h3><blockquote><p>注意：推荐Centos或Uuntu系统，目前我用的是CentOS系统作为服务器</p></blockquote><h4 id="1-1-安装git工具"><a href="#1-1-安装git工具" class="headerlink" title="1.1 安装git工具"></a>1.1 安装git工具</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# yum -y install git</span><br></pre></td></tr></table></figure><h4 id="1-2-创建git新用户并且设置密码"><a href="#1-2-创建git新用户并且设置密码" class="headerlink" title="1.2 创建git新用户并且设置密码"></a>1.2 创建git新用户并且设置密码</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# useradd git &amp;&amp; <span class="built_in">echo</span> git |passwd --stdin git</span><br></pre></td></tr></table></figure><h4 id="1-3-创建git私有仓库"><a href="#1-3-创建git私有仓库" class="headerlink" title="1.3 创建git私有仓库"></a>1.3 创建git私有仓库</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// 注意：先切换git用户在创建</span><br><span class="line">[root@localhost ~]# su - git</span><br><span class="line">[git@localhost ~]$ <span class="built_in">mkdir</span> repo</span><br><span class="line">[git@localhost ~]$ <span class="built_in">cd</span> repo/</span><br><span class="line">[git@localhost repo]$ git init --bare hexo.git</span><br><span class="line">初始化空的 Git 版本库于 /home/git/repo/hexo.git/</span><br><span class="line">[git@localhost repo]$ <span class="built_in">ls</span></span><br><span class="line">hexo.git</span><br><span class="line">[git@localhost repo]$ <span class="built_in">cd</span> hexo.git/</span><br><span class="line">[git@localhost hexo.git]$ <span class="built_in">ls</span></span><br><span class="line">branches  config  description  HEAD  hooks  info  objects  refs</span><br><span class="line">git@localhost hexo.git]$ <span class="built_in">cd</span></span><br></pre></td></tr></table></figure><h4 id="1-4-创建git私有仓库钩子"><a href="#1-4-创建git私有仓库钩子" class="headerlink" title="1.4 创建git私有仓库钩子"></a>1.4 创建git私有仓库钩子</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[git@localhost ~]$ <span class="built_in">cd</span> /home/git/repo/hexo.git/</span><br><span class="line">[git@localhost hexo.git]$ vim hooks/post-receive</span><br><span class="line">[git@localhost hexo.git]$ <span class="built_in">cat</span> hooks/post-receive</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">repo_path=/home/git/repo/hexo.git</span><br><span class="line">hexo_path=/var/www/hexo</span><br><span class="line">git --work-tree=<span class="variable">$hexo_path</span> --git-dir=<span class="variable">$repo_path</span> checkout -f</span><br><span class="line"></span><br><span class="line">[git@localhost hexo.git]$ <span class="built_in">chmod</span> +x hooks/post-receive</span><br><span class="line">[git@localhost hexo.git]$ <span class="built_in">chown</span> -R git:git hooks/post-receive</span><br></pre></td></tr></table></figure><h3 id="二、部署Nginx站点"><a href="#二、部署Nginx站点" class="headerlink" title="二、部署Nginx站点"></a>二、部署Nginx站点</h3><h4 id="2-1-安装nginx服务"><a href="#2-1-安装nginx服务" class="headerlink" title="2.1 安装nginx服务"></a>2.1 安装nginx服务</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# yum -y install nginx</span><br></pre></td></tr></table></figure><h4 id="2-2-查看用户id"><a href="#2-2-查看用户id" class="headerlink" title="2.2 查看用户id"></a>2.2 查看用户id</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">id</span> nginx</span><br><span class="line">uid=996(nginx) gid=994(nginx) 组=994(nginx)</span><br></pre></td></tr></table></figure><h4 id="2-3-备份nginx-conf文件"><a href="#2-3-备份nginx-conf文件" class="headerlink" title="2.3 备份nginx.conf文件"></a>2.3 备份nginx.conf文件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">ls</span> /etc/nginx/</span><br><span class="line">conf.d     fastcgi.conf          fastcgi_params          koi-utf  mime.types          nginx.conf          scgi_params          uwsgi_params          win-utf</span><br><span class="line">default.d  fastcgi.conf.default  fastcgi_params.default  koi-win  mime.types.default  nginx.conf.default  scgi_params.default  uwsgi_params.default</span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -r /etc/nginx/nginx.conf&#123;,.bak&#125;</span><br><span class="line">[root@localhost ~]# <span class="built_in">ls</span> /etc/nginx/</span><br><span class="line">conf.d     fastcgi.conf          fastcgi_params          koi-utf  mime.types          nginx.conf      nginx.conf.default  scgi_params.default  uwsgi_params.default</span><br><span class="line">default.d  fastcgi.conf.default  fastcgi_params.default  koi-win  mime.types.default  nginx.conf.bak  scgi_params         uwsgi_params         win-utf</span><br></pre></td></tr></table></figure><h4 id="2-4-编辑nginx-conf文件，并且修改内容"><a href="#2-4-编辑nginx-conf文件，并且修改内容" class="headerlink" title="2.4 编辑nginx.conf文件，并且修改内容"></a>2.4 编辑nginx.conf文件，并且修改内容</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// 找到以下内容并且编辑</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        listen       [::]:80;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /var/www/hexo;</span><br><span class="line">index        index.html index.php index.htm;</span><br><span class="line">        <span class="comment"># Load configuration files for the default server block.</span></span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="2-5-创建nginx站点和index-html文件"><a href="#2-5-创建nginx站点和index-html文件" class="headerlink" title="2.5 创建nginx站点和index.html文件"></a>2.5 创建nginx站点和index.html文件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> /var/www/hexo</span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> -R git:git /var/www/hexo/</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="string">&quot;hexo server myblog&quot;</span> &gt;&gt; /var/www/hexo/index.html</span><br></pre></td></tr></table></figure><h4 id="2-6-nginx验证"><a href="#2-6-nginx验证" class="headerlink" title="2.6 nginx验证"></a>2.6 nginx验证</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line">[root@localhost ~]# systemctl start nginx</span><br><span class="line">[root@localhost ~]# systemctl <span class="built_in">enable</span> nginx</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/nginx.service to /usr/lib/systemd/system/nginx.service.</span><br></pre></td></tr></table></figure><blockquote><p>注意：nginx服务启动后需要在浏览器上访问测试是否是显示index.html文件内容</p></blockquote>]]></content>
    
    
    <summary type="html">从入门到精通部署hexo个人博客</summary>
    
    
    
    
    <category term="hexo博客" scheme="http://blog.smallrains.com/tags/hexo%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>自动化部署hexo博客（二）</title>
    <link href="http://blog.smallrains.com/2024/12/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2hexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>http://blog.smallrains.com/2024/12/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2hexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89/</id>
    <published>2024-12-25T12:26:00.000Z</published>
    <updated>2024-12-25T14:16:01.310Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>因为方便测试使用，我是直接在D盘下创建的一个demo目录，然后使用npm部署hexo项目</p></blockquote><ul><li>推荐使用windows环境使用<ul><li><a href="https://nodejs.org/">nodejs</a></li><li><a href="https://git-scm.com/">git工具</a></li><li><a href="https://hexo.io/">hexo工具</a></li><li><a href="https://github.com/jerryc127/hexo-theme-butterfly.git">buttfly主题</a></li></ul></li></ul><h3 id="创建hexo项目"><a href="#创建hexo项目" class="headerlink" title="创建hexo项目"></a>创建hexo项目</h3><blockquote><p>需要打开命令终端并且创建demo目录生成hexo项目</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 创建demo目录</span><br><span class="line">md demo</span><br><span class="line"></span><br><span class="line">// 安装hexo-cli</span><br><span class="line">cd demo</span><br><span class="line">npm install -g hexo-cli</span><br><span class="line"></span><br><span class="line">// 生成hexo项目</span><br><span class="line">hexo init hexo</span><br><span class="line"></span><br><span class="line">// 安装依赖</span><br><span class="line">cd hexo</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><h3 id="测试hexo项目"><a href="#测试hexo项目" class="headerlink" title="测试hexo项目"></a>测试hexo项目</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 清除缓存</span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line">// 运行hexo</span><br><span class="line">npm server</span><br></pre></td></tr></table></figure><blockquote><p>然后使用浏览器访问地址，如果出现页面就是测试成功</p></blockquote><h4 id="配置-config-yml文件"><a href="#配置-config-yml文件" class="headerlink" title="配置_config.yml文件"></a>配置<code>_config.yml</code>文件</h4><blockquote><p>需要在根目录下编辑<code>_config.yml</code>文件中添加以下配置</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/one-command-deployment</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@blog.smallrains.com:/home/git/repo/hexo.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><h4 id="发布项目"><a href="#发布项目" class="headerlink" title="发布项目"></a>发布项目</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 安装hexo-deployer-git插件</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">hexo g -d</span><br></pre></td></tr></table></figure><p> <img src="https://blog-1310550159.cos.ap-nanjing.myqcloud.com/images/1735135985093.jpg" alt="alt text"></p>]]></content>
    
    
    <summary type="html">从入门到精通部署hexo个人博客</summary>
    
    
    
    
    <category term="hexo博客" scheme="http://blog.smallrains.com/tags/hexo%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
</feed>
